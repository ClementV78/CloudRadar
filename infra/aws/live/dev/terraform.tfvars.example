region               = "us-east-1"
project              = "cloudradar"
environment          = "dev"
vpc_cidr_block       = "10.0.0.0/16"
azs                  = ["us-east-1a"]
public_subnet_cidrs  = ["10.0.1.0/24"]
private_subnet_cidrs = ["10.0.101.0/24"]

nat_instance_type    = "t3.nano"
nat_root_volume_size = 8

# VPC Flow Logs (CloudWatch Logs)
# Cost notes:
# - CloudWatch Logs ingestion is billed by GB ingested.
# - Retention also impacts cost (stored GB-month).
enable_vpc_flow_logs                = true
vpc_flow_logs_retention_in_days     = 3
vpc_flow_logs_traffic_type          = "ALL"
vpc_flow_logs_max_aggregation_interval = 60

k3s_server_instance_type = "t3a.medium"
k3s_worker_instance_type = "t3a.medium"
k3s_worker_min_size       = 1
k3s_worker_desired        = 1
k3s_worker_max_size       = 3
k3s_root_volume_size      = 40
k3s_server_extra_args     = ["--node-taint=node-role.kubernetes.io/control-plane:NoSchedule"]

# Grafana CloudWatch datasource uses the EC2 instance role (no static keys).
enable_grafana_cloudwatch_read = true

# Optional: external AWS alerting (CloudWatch -> SNS email).
# Keep disabled by default for cost control.
# enable_external_alerting = true
# alerts_enabled           = true
# alert_email_endpoint     = "alerts@example.com"

# Optional: additional k3s flags.
# k3s_server_extra_args = ["--tls-san=example.com"]
# k3s_agent_extra_args  = []

# Optional: enable EC2 Serial Console login for ec2-user (temporary).
# Provide a SHA-512 password hash, not plaintext.
# Example: openssl passwd -6 'change-me'
# k3s_server_serial_console_password_hash = "$6$..."

# Optional: use the bootstrap-created SQLite backup bucket.
# sqlite_backup_bucket_name = "cloudradar-dev-<account-id>-sqlite-backups"

# Optional: use the bootstrap-created aircraft reference data bucket.
# aircraft_reference_bucket_name = "cloudradar-dev-<account-id>-reference-data"

# Optional: configure aircraft reference DB enrichment in the processor.
# Stored in SSM and injected into the processor via External Secrets Operator.
# processor_aircraft_db_enabled = true
# processor_aircraft_db_s3_uri  = "s3://<bucket>/aircraft-db/<version>/aircraft.db"
# processor_aircraft_db_sha256  = "<sha256>"

edge_instance_type       = "t3.micro"
# edge_ami_id             = "ami-xxxxxxxxxxxxxxxxx"
edge_root_volume_size    = 40
edge_allowed_cidrs       = ["0.0.0.0/0"]
edge_server_name         = "_"
edge_basic_auth_user     = "cloudradar"
edge_basic_auth_ssm_parameter_name = "/cloudradar/edge/basic-auth"
edge_admin_token_ssm_parameter_name = "/cloudradar/admin/k8s-admin-api-token"
edge_ssm_egress_enabled  = true
edge_dashboard_nodeport  = 30080
edge_api_nodeport        = 30081
edge_health_nodeport     = 32736
edge_admin_nodeport      = 32737
edge_prometheus_nodeport = 30080
edge_grafana_nodeport    = 30080
edge_enable_http_redirect = true
edge_ssm_vpc_endpoints_enabled = false

# Optional delegated subdomain managed in Route53 (leave empty to disable).
dns_zone_name = "cloudradar.example.com"
