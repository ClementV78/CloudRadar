server:
  port: 8080

ingester:
  refresh-ms: ${INGESTER_REFRESH_MS:10000}
  redis:
    key: ${INGESTER_REDIS_KEY:cloudradar:ingest:queue}
  bbox:
    lat-min: ${OPENSKY_LAT_MIN:46.8296}
    lat-max: ${OPENSKY_LAT_MAX:50.8836}
    lon-min: ${OPENSKY_LON_MIN:-0.7389}
    lon-max: ${OPENSKY_LON_MAX:5.4433}
  bbox-boost:
    redis-key: ${OPENSKY_BBOX_BOOST_ACTIVE_KEY:cloudradar:opensky:bbox:boost:active}
    factor: ${OPENSKY_BBOX_BOOST_FACTOR:2.0}
  rate-limit:
    quota: ${OPENSKY_CREDITS_QUOTA:4000}
    warn-50: ${OPENSKY_CREDITS_WARN_50:50}
    warn-80: ${OPENSKY_CREDITS_WARN_80:80}
    warn-95: ${OPENSKY_CREDITS_WARN_95:95}
    refresh-warn-ms: ${INGESTER_REFRESH_WARN_MS:30000}
    refresh-critical-ms: ${INGESTER_REFRESH_CRITICAL_MS:300000}

opensky:
  base-url: ${OPENSKY_BASE_URL:https://opensky-network.org/api}
  token-url: ${OPENSKY_TOKEN_URL:https://auth.opensky-network.org/auth/realms/opensky-network/protocol/openid-connect/token}
  client-id: ${OPENSKY_CLIENT_ID:}
  client-secret: ${OPENSKY_CLIENT_SECRET:}
  routing-mode: ${OPENSKY_ROUTING_MODE:direct}
  tunnel-base-url: ${OPENSKY_TUNNEL_BASE_URL:}
  tunnel-token-url: ${OPENSKY_TUNNEL_TOKEN_URL:}
  worker-base-url: ${OPENSKY_WORKER_BASE_URL:}
  worker-token-url: ${OPENSKY_WORKER_TOKEN_URL:}
  relay-auth-header: ${OPENSKY_RELAY_AUTH_HEADER:}
  relay-auth-token: ${OPENSKY_RELAY_AUTH_TOKEN:}
  client-id-ssm: ${OPENSKY_CLIENT_ID_SSM:}
  client-secret-ssm: ${OPENSKY_CLIENT_SECRET_SSM:}
  base-url-ssm: ${OPENSKY_BASE_URL_SSM:}
  token-url-ssm: ${OPENSKY_TOKEN_URL_SSM:}

aws:
  region: ${AWS_REGION:us-east-1}

spring:
  data:
    redis:
      host: ${REDIS_HOST:redis.data.svc.cluster.local}
      port: ${REDIS_PORT:6379}

management:
  endpoints:
    web:
      base-path: /
      exposure:
        include: health,metrics,prometheus
      path-mapping:
        health: healthz
        metrics: metrics/actuator
        prometheus: metrics/prometheus
  endpoint:
    health:
      probes:
        enabled: true
